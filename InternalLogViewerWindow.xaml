<Window x:Class="WpfLogViewerApp.InternalLogViewerWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="内部ログビューア" Height="620" Width="900" WindowStartupLocation="CenterOwner">
    <Window.Resources>
        <!-- 行ハイライト用スタイル（Tag == "highlight" のとき背景を薄黄色に） -->
        <Style x:Key="LineItemStyle" TargetType="ListBoxItem">
            <Setter Property="Padding" Value="6,2"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding RelativeSource={RelativeSource Self}, Path=Tag}" Value="highlight">
                    <Setter Property="Background" Value="#FFF7AD"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel Orientation="Horizontal" Margin="8">
            <TextBlock Text="ファイル:" VerticalAlignment="Center" Margin="0,0,6,0"/>
            <TextBlock x:Name="lblFile" VerticalAlignment="Center" />
            <Button Content="コピー" Margin="8,0,0,0" Click="CopyPath_Click"/>
        </StackPanel>
        <ListBox x:Name="linesList" Grid.Row="1"
         VirtualizingPanel.IsVirtualizing="True"
         VirtualizingPanel.VirtualizationMode="Recycling"
         VirtualizingPanel.ScrollUnit="Pixel"
            VirtualizingPanel.CacheLengthUnit="Page"
            VirtualizingPanel.CacheLength="2"
            ScrollViewer.CanContentScroll="True"
         FontFamily="Consolas"
         SelectionMode="Single"
         IsSynchronizedWithCurrentItem="True">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="Padding" Value="6,2"/>
                    <Setter Property="SnapsToDevicePixels" Value="True"/>
                    <Style.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter Property="Background" Value="#FFF7AD"/>
                            <Setter Property="Foreground" Value="Black"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <VirtualizingStackPanel/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>
    </Grid>
</Window>