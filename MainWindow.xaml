<Window x:Class="WpfLogViewerApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="WPF Log viewer" Height="640" Width="1100">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="36"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Menu（Tools に「ターゲットログを選択」を追加） -->
        <Border Grid.Row="0" Background="#FFFFFF" BorderBrush="#D0D5DD" BorderThickness="0,0,0,1">
            <Menu Background="#FFFFFF" Foreground="#111111" FontSize="13" Padding="8,0">
                <MenuItem Header="ファイル">
                    <MenuItem Header="開く" Click="MenuOpen_Click"/>
                    <Separator/>
                    <MenuItem Header="終了" Click="MenuExit_Click"/>
                </MenuItem>
                <MenuItem Header="ツール">
                    <MenuItem Header="外部エディタ設定" Click="MenuEditorSettings_Click"/>
                    <MenuItem Header="ターゲットログを選択" Click="MenuPickTargetLog_Click"/>
                </MenuItem>
                <MenuItem Header="ヘルプ">
                    <MenuItem Header="バージョン情報" Click="MenuHelp_Click"/>
                </MenuItem>
            </Menu>
        </Border>

        <!-- Command bar（自動同期トグルを追加・既定ON） -->
        <StackPanel Grid.Row="1" Orientation="Horizontal" Margin="10,8,10,0">
            <Button Content="クエリ表示" Click="ShowQueryDialog_Click"
              Padding="10,8" Margin="6,6,0,6" Background="#3B82F6" Foreground="White" BorderThickness="0"/>
            <Button Content="クエリ実行" Click="ExecuteQuery_Click"
              Padding="10,8" Margin="6,6,0,6" Background="#3B82F6" Foreground="White" BorderThickness="0"/>
            <ToggleButton x:Name="toggleAutoSync" Content="自動同期" IsChecked="True"
                    Padding="10,8" Margin="6,6,0,6" Background="#16A34A" Foreground="White" BorderThickness="0"/>
            <Button Content="内部表示" Click="OpenInternalViewer_Click"
              Padding="10,8" Margin="6,6,0,6" Background="#64748B" Foreground="White" BorderThickness="0"/>
            <Button Content="外部エディタ" Click="OpenExternalEditor_Click"
              Padding="10,8" Margin="6,6,0,6" Background="#0EA5E9" Foreground="White" BorderThickness="0"/>
        </StackPanel>

        <!-- DataGrid（SelectionChanged を追加） -->
        <!-- DataGrid -->
        <Border Grid.Row="2" Style="{StaticResource CardBorder}" Margin="10">
            <DataGrid x:Name="logGrid"
                AutoGenerateColumns="True"
                HeadersVisibility="Column"
                CanUserAddRows="False"
                CanUserDeleteRows="False"
                CanUserResizeRows="True"
                CanUserSortColumns="True"
                GridLinesVisibility="All"
                Background="White"
                Foreground="Black"
                BorderThickness="0"
                BorderBrush="Transparent"
                HorizontalGridLinesBrush="LightGray"
                VerticalGridLinesBrush="LightGray"
                RowBackground="White"
                AlternationCount="2"
                AlternatingRowBackground="#FFF7F7F7"
                      SelectionChanged="logGrid_SelectionChanged">
                <DataGrid.RowStyle>
                    <Style TargetType="DataGridRow">
                        <EventSetter Event="PreviewMouseRightButtonDown" Handler="DataGridRow_PreviewMouseRightButtonDown"/>

                    </Style>
                </DataGrid.RowStyle>
                <DataGrid.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="内部表示で開く" Click="OpenInternalViewer_Click"/>
                        <MenuItem Header="外部エディタで開く" Click="OpenExternalEditor_Click"/>
                    </ContextMenu>
                </DataGrid.ContextMenu>
                
            </DataGrid>
        </Border>
    </Grid>
</Window>
